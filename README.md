# Ceobe-Canteen-Serve

- [git emoji](https://gitmoji.dev/) 以后提交用这个吧

## 异常

- 前缀类型说明
  | 前缀 | 说明 |
  |:----: | :----|
  | `F` | 框架产生的异常 |
  | `D` | 数据库异常 |
  | `I` | IO 过程异常 |
  | `P` | 数据转换时异常 |
  | `C` | 数据校验异常 |
  | `S` | 资源查找异常 |
  | `M` | 数据未变更 |

- 框架异常

  | 前缀 | 异常码 | httpCode | 说明                       |
  | :--: | :----: | :------: | :------------------------- |
  | `F`  |  0001  |   500    | `Actix` Actor MailBoxError |
  | `F`  |  0002  |   500    | `Actix-web` 异常           |

- Io 异常

  | 前缀 | 异常码 | httpCode | 说明             |
  | :--: | :----: | :------: | :--------------- |
  | `I`  |  0001  |   500    | `std::io::Error` |

- 类型转换异常

  | 前缀 | 异常码 | httpCode | 说明         |
  | :--: | :----: | :------: | :----------- |
  | `P`  |  0001  |   406    | Url 转化异常 |
  | `P`  |  0002  |   406    | 数字转换异常 |

- 数据校验异常

  | 前缀 | 异常码 | httpCode | 说明                             |
  | :--: | :----: | :------: | :------------------------------- |
  | `C`  |  0001  |   406    | 范围检查未通过                   |
  | `C`  |  0002  |   406    | 饼学大厦 id 格式不是 {int}.{int} |
  | `C`  |  0003  |   406    | 错误的Fraction值范围(0~5) |
  | `C`  |  0004  |   406    | `Json` 序列化/反序列化异常 |

- 数据库异常

  | 前缀 | 异常码 | httpCode | 说明                 |
  | :--: | :----: | :------: | :------------------- |
  | `D`  |  0001  |   500    | 数据库连接失败       |
  | `D`  |  0002  |   500    | 数据库请求操作失败   |
  | `D`  |  0003  |   500    | 数据库查询失败       |
  | `D`  |  0004  |   500    | 数据库记录不存在     |
  | `D`  |  0005  |   500    | 数据库 `CustomError` |
  | `D`  |  0006  |   500    | 数据库类型转换失败   |

- 数据未变更

  | 前缀 | 异常码 | httpCode | 说明                           |
  | :--: | :----: | :------: | :----------------------------- |
  | `M`  |  0001  |   304    | Ceobe 在当前提供时间戳下无更新 |

- 资源查找异常

  | 前缀 | 异常码 | httpCode | 说明           |
  | :--: | :----: | :------: | :------------- |
  | `S`  |  0001  |   404    | 指定饼学大厦未找到 |
